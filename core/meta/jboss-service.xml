<?xml version="1.0" encoding="UTF-8"?>
<!-- 
DOCTYPE server
PUBLIC "-//JBoss//DTD MBean Service 4.0//EN"
"http://www.jboss.org/j2ee/dtd/jboss-service_4_0.dtd"
-->

<!--
$Id$
$URL$
-->

<server>
	<mbean code="org.jboss.security.auth.login.DynamicLoginConfig" name="subetha:service=LoginConfig">
		<attribute name="PolicyConfig" serialDataType="jbxb">
			<jaas:policy
				xsi:schemaLocation="urn:jboss:security-config:4.1 resource:security-config_4_1.xsd"
				xmlns:jaas="urn:jboss:security-config:4.1"
				xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
				
				<jaas:application-policy name="subetha">
					<jaas:authentication>
						<jaas:login-module code="org.subethamail.core.util.SubEthaLoginModule" flag="required">
							<jaas:module-option name="unauthenticatedIdentity">-1</jaas:module-option>
						</jaas:login-module>
					</jaas:authentication>
				</jaas:application-policy>
			</jaas:policy>
		</attribute>
		<depends optional-attribute-name="LoginConfigService">jboss.security:service=XMLLoginConfig</depends>
		<depends optional-attribute-name="SecurityManagerService">jboss.security:service=JaasSecurityManager</depends>
	</mbean>
	
	<mbean code="org.jboss.mq.server.jmx.Queue" name="jboss.mq.destination:service=Queue,name=subetha/inbound">
		<depends optional-attribute-name="DestinationManager">jboss.mq:service=DestinationManager</depends>
		<depends optional-attribute-name="SecurityManager">jboss.mq:service=SecurityManager</depends>
		<attribute name="RedeliveryLimit">100</attribute>
		<attribute name="RedeliveryDelay">600000</attribute> <!-- 10 minutes -->
	</mbean>
	<mbean code="org.jboss.mq.server.jmx.Queue" name="jboss.mq.destination:service=Queue,name=subetha/outbound">
		<depends optional-attribute-name="DestinationManager">jboss.mq:service=DestinationManager</depends>
		<depends optional-attribute-name="SecurityManager">jboss.mq:service=SecurityManager</depends>
		<attribute name="RedeliveryLimit">100</attribute>
		<attribute name="RedeliveryDelay">600000</attribute> <!-- 10 minutes -->
	</mbean>
</server>